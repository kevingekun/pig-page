import{v as H,r as y,d as V}from"./index.BD7QhO6d.js";import{b as I,c as N,e as O,h as Q}from"./dict.ChjYYQ0J.js";import{u as W}from"./dict.CWam5sZg.js";import{a as T,r as b,a0 as _,al as i,at as X,b as $,o as c,X as r,R as d,S as z,Q as k,u as t,F as A,ad as E,V as f,W as v,e as G,H as J,n as K}from"./vue.Bq5FSDyb.js";const M={class:"system-dic-dialog-container"},P={class:"dialog-footer"},Y=T({name:"systemDicDialog"}),Z=T({...Y,emits:["refresh"],setup(ee,{expose:x,emit:F}){const w=F,{dict_type:D}=W("dict_type"),{t:U}=H.useI18n(),n=b(),o=b(!1),u=b(!1),a=_({id:"",dictType:"",description:"",systemFlag:"0",remarks:""}),B=_({dictType:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:y.validatorNameCn,trigger:"blur"},{validator:(e,l,p)=>{I(e,l,p,a.id!=="")},trigger:"blur"}],systemFlag:[{required:!0,message:"\u5B57\u5178\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),q=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;try{u.value=!0;const e=a.id?await O(a):await Q(a);V().success(U(a.id?"common.editSuccessText":"common.addSuccessText")),o.value=!1,w("refresh",e.data)}catch(e){V().error(e.msg)}finally{u.value=!1}};return x({openDialog:e=>{o.value=!0,a.id="",K(()=>{var l;(l=n.value)==null||l.resetFields()}),e&&N(e).then(l=>{Object.assign(a,l.data)})}}),(e,l)=>{const p=i("el-radio"),C=i("el-radio-group"),m=i("el-form-item"),g=i("el-input"),R=i("el-form"),h=i("el-button"),S=i("el-dialog"),L=X("loading");return c(),$("div",M,[r(S,{title:t(a).id?e.$t("common.editBtn"):e.$t("common.addBtn"),modelValue:t(o),"onUpdate:modelValue":l[5]||(l[5]=s=>J(o)?o.value=s:null),width:"600"},{footer:d(()=>[G("span",P,[r(h,{onClick:l[4]||(l[4]=s=>o.value=!1)},{default:d(()=>[f(v(e.$t("common.cancelButtonText")),1)]),_:1}),r(h,{onClick:q,type:"primary",disabled:t(u)},{default:d(()=>[f(v(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[z((c(),k(R,{model:t(a),rules:t(B),"label-width":"90px",ref_key:"dicDialogFormRef",ref:n},{default:d(()=>[r(m,{label:e.$t("sysdict.systemFlag"),prop:"systemFlag"},{default:d(()=>[r(C,{modelValue:t(a).systemFlag,"onUpdate:modelValue":l[0]||(l[0]=s=>t(a).systemFlag=s)},{default:d(()=>[(c(!0),$(A,null,E(t(D),(s,j)=>(c(),k(p,{border:"",key:j,label:s.value},{default:d(()=>[f(v(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.dictType"),prop:"dictType"},{default:d(()=>[r(g,{placeholder:e.$t("sysdict.inputDictTypeTip"),disabled:t(a).id!=="",clearable:"",modelValue:t(a).dictType,"onUpdate:modelValue":l[1]||(l[1]=s=>t(a).dictType=s)},null,8,["placeholder","disabled","modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.description"),prop:"description"},{default:d(()=>[r(g,{placeholder:e.$t("sysdict.inputDescriptionTip"),clearable:"",modelValue:t(a).description,"onUpdate:modelValue":l[2]||(l[2]=s=>t(a).description=s)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.remarks"),prop:"remarks"},{default:d(()=>[r(g,{type:"textarea",maxlength:"150",rows:"3",placeholder:e.$t("sysdict.inputRemarksTip"),modelValue:t(a).remarks,"onUpdate:modelValue":l[3]||(l[3]=s=>t(a).remarks=s)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[L,t(u)]])]),_:1},8,["title","modelValue"])])}}});export{Z as default};
