import{u as H}from"./dict.CvMx61Qh.js";import{v as X,d as S,r as s}from"./index.G4Dhx3nr.js";import{p as E,a as J,g as K,v as M}from"./client.VuIZsuYl.js";import{a as U,r as h,a0 as N,al as u,at as P,Q as m,o as c,R as i,S as Y,u as e,X as o,T as f,b as w,F as z,ad as R,V as y,W as T,e as Z,H as ee,n as ae}from"./vue.Bq5FSDyb.js";import"./dict.CMxjV9P8.js";const le={class:"dialog-footer"},te=U({name:"SysOauthClientDetailsDialog"}),re=U({...te,emits:["refresh"],setup(ie,{expose:G,emit:I}){const L=I,{t:r}=X.useI18n(),v=h(),g=h(!1),b=h(!1),{grant_types:q,common_status:x}=H("grant_types","common_status"),a=N({id:"",clientId:"",clientSecret:"",scope:"server",authorizedGrantTypes:[],webServerRedirectUri:"",authorities:"",accessTokenValidity:43200,refreshTokenValidity:2592001,autoapprove:"true",delFlag:"",createBy:"",updateBy:"",createTime:"",updateTime:"",tenantId:"",onlineQuantity:"1",captchaFlag:"1",encFlag:"1"}),B=h({clientId:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:s.validatorLowercase,trigger:"blur"},{validator:(d,l,p)=>{M(d,l,p,a.id!=="")},trigger:"blur"}],clientSecret:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:s.validatorLower,trigger:"blur"}],scope:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"\u6388\u6743\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessTokenValidity:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E00\u5C0F\u65F6",trigger:"blur"}],refreshTokenValidity:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E24\u5C0F\u65F6",trigger:"blur"}],autoapprove:[{required:!0,message:"\u81EA\u52A8\u653E\u884C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],webServerRedirectUri:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorities:[{validator:s.overLength,trigger:"blur"}]}),F=async()=>{if(!await v.value.validate().catch(()=>{}))return!1;try{b.value=!0,a.id?await E(a):await J(a),S().success(r(a.id?"common.editSuccessText":"common.addSuccessText")),g.value=!1,L("refresh")}catch(d){S().error(d.msg)}finally{b.value=!1}},C=d=>{K(d).then(l=>{Object.assign(a,l.data)})};return G({openDialog:d=>{g.value=!0,a.id="",ae(()=>{var l;(l=v.value)==null||l.resetFields()}),d&&(a.id=d,C(d))}}),(d,l)=>{const p=u("el-input"),n=u("el-form-item"),D=u("el-option"),$=u("el-select"),_=u("el-input-number"),A=u("el-radio"),O=u("el-radio-group"),j=u("el-form"),k=u("el-button"),Q=u("el-dialog"),W=P("loading");return c(),m(Q,{"close-on-click-modal":!1,title:e(a).id?d.$t("common.editBtn"):d.$t("common.addBtn"),width:"600",draggable:"",modelValue:e(g),"onUpdate:modelValue":l[10]||(l[10]=t=>ee(g)?g.value=t:null)},{footer:i(()=>[Z("span",le,[o(k,{onClick:l[9]||(l[9]=t=>g.value=!1)},{default:i(()=>[y(T(d.$t("common.cancelButtonText")),1)]),_:1}),o(k,{onClick:F,type:"primary",disabled:e(b)},{default:i(()=>[y(T(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:i(()=>[Y((c(),m(j,{model:e(a),rules:e(B),formDialogRef:"","label-width":"120px",ref_key:"dataFormRef",ref:v},{default:i(()=>[o(n,{label:e(r)("client.clientId"),prop:"clientId"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputClientIdTip"),modelValue:e(a).clientId,"onUpdate:modelValue":l[0]||(l[0]=t=>e(a).clientId=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.clientSecret"),prop:"clientSecret"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputClientSecretTip"),modelValue:e(a).clientSecret,"onUpdate:modelValue":l[1]||(l[1]=t=>e(a).clientSecret=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.scope"),prop:"scope"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputScopeTip"),modelValue:e(a).scope,"onUpdate:modelValue":l[2]||(l[2]=t=>e(a).scope=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.authorizedGrantTypes"),prop:"authorizedGrantTypes"},{default:i(()=>[o($,{"collapse-tags":"","collapse-tags-tooltip":"",multiple:"",modelValue:e(a).authorizedGrantTypes,"onUpdate:modelValue":l[3]||(l[3]=t=>e(a).authorizedGrantTypes=t)},{default:i(()=>[(c(!0),w(z,null,R(e(q),(t,V)=>(c(),m(D,{key:V,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.accessTokenValidity"),prop:"accessTokenValidity"},{default:i(()=>[o(_,{placeholder:e(r)("client.inputAccessTokenValidityTip"),modelValue:e(a).accessTokenValidity,"onUpdate:modelValue":l[4]||(l[4]=t=>e(a).accessTokenValidity=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.refreshTokenValidity"),prop:"refreshTokenValidity"},{default:i(()=>[o(_,{placeholder:e(r)("client.inputRefreshTokenValidityTip"),modelValue:e(a).refreshTokenValidity,"onUpdate:modelValue":l[5]||(l[5]=t=>e(a).refreshTokenValidity=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:0,label:e(r)("client.autoapprove"),prop:"autoapprove"},{default:i(()=>[o(O,{modelValue:e(a).autoapprove,"onUpdate:modelValue":l[6]||(l[6]=t=>e(a).autoapprove=t)},{default:i(()=>[(c(!0),w(z,null,R(e(x),(t,V)=>(c(),m(A,{key:V,label:t.value,border:""},{default:i(()=>[y(T(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):f("",!0),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:1,label:e(r)("client.authorities"),prop:"authorities"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputAuthoritiesTip"),modelValue:e(a).authorities,"onUpdate:modelValue":l[7]||(l[7]=t=>e(a).authorities=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):f("",!0),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:2,label:e(r)("client.webServerRedirectUri"),prop:"webServerRedirectUri"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputWebServerRedirectUriTip"),modelValue:e(a).webServerRedirectUri,"onUpdate:modelValue":l[8]||(l[8]=t=>e(a).webServerRedirectUri=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):f("",!0)]),_:1},8,["model","rules"])),[[W,e(b)]])]),_:1},8,["title","modelValue"])}}});export{re as default};
