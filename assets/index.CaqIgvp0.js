const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./form.DnmdsS_0.js","./table.2smnE9gB.js","./index.DWNm7vYi.js","./vue.Bq5FSDyb.js","./index.BG-hBW4t.css","./table.BdsUKI8g.js"])))=>i.map(i=>d[i]);
import{v as D,k as I,e as R,c as S,d as m,y as O,__tla as T}from"./index.DWNm7vYi.js";import{u as E,a as F,b as y,c as j}from"./table.BdsUKI8g.js";import{a as q,aE as L,r as _,a0 as N,j as M,al as b,b as P,o as V,e as A,X as o,R as r,V as u,u as l,aD as X}from"./vue.Bq5FSDyb.js";let v,z=Promise.all([(()=>{try{return T}catch{}})()]).then(async()=>{let c,d;c={class:"layout-padding"},d={class:"layout-padding-auto layout-padding-view"},v=q({__name:"index",setup(G){const k=X(()=>S(()=>import("./form.DnmdsS_0.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{t:f}=D.useI18n(),n=L(),s=_(),p=_(),h=N(["tab","card","table","cascader"]),C=N({languageMenu:!1,externalLink:!1,formTemplates:!1,widgetNameReadonly:!1,eventCollapse:!1,clearDesignerButton:!0,previewFormButton:!1,importJsonButton:!1,exportJsonButton:!1,exportCodeButton:!0,generateSFCButton:!1});M(()=>{w()});const w=()=>{const{tableName:a,dsName:e}=n.query;a&&e?E(e,a).then(t=>{s.value.loadJson(t)}):I().confirm("\u8868\u5355\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u8868\u70B9\u51FB\u8BBE\u8BA1\u6253\u5F00").then(()=>{R.emit("onCurrentContextmenuClick",Object.assign({},{contextMenuClickId:1,...n}))})},x=a=>{F(a).then(e=>{s.value.loadJson(JSON.parse(e.data.formInfo)),m().success(f("common.optSuccessText"))})},J=()=>{const{tableName:a,dsName:e}=n.query;if(a&&e){const t=s.value.getFormJson();y({dsName:e,tableName:a,formInfo:JSON.stringify(t)}).then(()=>{m().success(f("common.optSuccessText"))})}},B=async()=>{try{const{tableName:a,dsName:e}=n.query;if(!a||!e)throw new Error("\u8868\u540D\u6216\u6570\u636E\u6E90\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");const t=s.value.getFormJson(),{data:i}=await y({dsName:e,tableName:a,formInfo:JSON.stringify(t)}),g=await j(i.id);O(g,"form.vue")}catch(a){m().error(a.message)}};return(a,e)=>{const t=b("el-button"),i=b("v-form-designer");return V(),P("div",c,[A("div",d,[o(i,{ref_key:"vfDesignerRef",ref:s,"banned-widgets":l(h),"designer-config":l(C)},{customToolButtons:r(()=>[o(t,{link:"",type:"primary",onClick:J},{default:r(()=>e[1]||(e[1]=[u("\u4FDD\u5B58")])),_:1}),o(t,{link:"",type:"primary",onClick:B},{default:r(()=>e[2]||(e[2]=[u("\u5BFC\u51FA")])),_:1}),o(t,{link:"",type:"primary",onClick:e[0]||(e[0]=g=>l(p).openDialog())},{default:r(()=>e[3]||(e[3]=[u("\u5386\u53F2")])),_:1})]),_:1},8,["banned-widgets","designer-config"])]),o(l(k),{ref_key:"formDialogRef",ref:p,onRefresh:x},null,512)])}}})});export{z as __tla,v as default};
