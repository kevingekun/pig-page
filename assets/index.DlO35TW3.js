import{S as $}from"./sortable.esm.RxdiMRVV.js";import{_ as k}from"./index.BD7QhO6d.js";import{al as d,b as S,o as s,X as o,R as t,Q as i,T as b,K as T,e as p,M as A,W as g,V as w}from"./vue.Bq5FSDyb.js";const D={props:{modelValue:{type:Array,default:()=>[]},addTemplate:{type:Object,default:()=>{}},placeholder:{type:String,default:"\u6682\u65E0\u6570\u636E"},dragSort:{type:Boolean,default:!1},hideAdd:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},data:()=>({data:[]}),mounted(){this.data=this.modelValue,this.dragSort&&this.rowDrop()},watch:{modelValue(){this.data=this.modelValue},data:{handler(){this.$emit("update:modelValue",this.data)},deep:!0}},methods:{rowDrop(){const e=this,a=this.$refs.table.$el.querySelector(".el-table__body-wrapper tbody");$.create(a,{handle:".move",animation:300,ghostClass:"ghost",onEnd({newIndex:l,oldIndex:h}){e.data.splice(l,0,e.data.splice(h,1)[0]);const n=e.data.slice(0),r=e.$refs.scFormTable.offsetHeight;e.$refs.scFormTable.style.setProperty("height",r+"px"),e.data=[],e.$nextTick(()=>{e.data=n,e.$nextTick(()=>{e.$refs.scFormTable.style.removeProperty("height")})})}})},rowAdd(){const e=JSON.parse(JSON.stringify(this.addTemplate));this.data.push(e)},rowDel(e,a){this.data.splice(a,1),this.$emit("delete",e)},pushRow(e){const a=e||JSON.parse(JSON.stringify(this.addTemplate));this.data.push(a)},deleteRow(e){this.data.splice(e,1)}}},V={class:"form-table",ref:"scFormTable"},C={class:"move",style:{cursor:"move"}},F=k(D,[["render",function(e,a,l,h,n,r){const m=d("el-button"),f=d("el-tooltip"),u=d("el-table-column"),x=d("WarningFilled"),y=d("el-icon"),v=d("Sort"),_=d("el-table");return s(),S("div",V,[o(_,{data:n.data,ref:"table",border:"",stripe:"","cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center",background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"}},{empty:t(()=>[w(g(l.placeholder),1)]),default:t(()=>[o(u,{type:"index",width:"50",fixed:"left"},{header:t(()=>[l.hideAdd?(s(),i(f,{key:1,content:"\u5E8F\u53F7",placement:"top"},{default:t(()=>a[0]||(a[0]=[w(" # ")])),_:1})):(s(),i(m,{key:0,type:"primary",icon:"el-icon-plus",size:"small",circle:"",onClick:r.rowAdd},null,8,["onClick"]))]),default:t(c=>[p("div",{class:A(["form-table-handle",{"form-table-handle-delete":!l.hideDelete}])},[p("span",null,g(c.$index+1),1),l.hideDelete?b("",!0):(s(),i(m,{key:0,type:"danger",icon:"el-icon-delete",size:"small",plain:"",circle:"",onClick:O=>r.rowDel(c.row,c.$index)},null,8,["onClick"]))],2)]),_:1}),l.dragSort?(s(),i(u,{key:0,label:"",width:"50"},{header:t(()=>[o(y,null,{default:t(()=>[o(f,{content:"\u62D6\u52A8\u6392\u5E8F",placement:"top"},{default:t(()=>[o(x)]),_:1})]),_:1})]),default:t(()=>[p("div",C,[o(y,null,{default:t(()=>[o(v)]),_:1})])]),_:1})):b("",!0),T(e.$slots,"default",{},void 0,!0)]),_:3},8,["data"])],512)}],["__scopeId","data-v-eb58e3fb"]]);export{F as default};
