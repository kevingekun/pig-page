import{a as o,r as I,aE as k,m as u,k as p,at as O,b as n,o as l,e as v,F as w,ad as b,u as h,S as y,X as S,R as _,Y as E,a3 as K,n as P}from"./vue.Bq5FSDyb.js";const R={class:"layout-padding layout-padding-unset layout-iframe"},x={class:"layout-padding-auto layout-padding-view"},A=["src","data-url"],F=o({name:"layoutIframeView"}),L=o({...F,props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>"slide-right"},list:{type:Array,default:()=>[]}},setup(d){const i=d,m=I(),r=k(),g=u(()=>i.list.filter(a=>{var e;return(e=a.meta)==null?void 0:e.isIframeOpen})),c=u(()=>r.path),f=(a,e)=>{P(()=>{if(!m.value)return!1;m.value.forEach(s=>{s.dataset.url===a&&(s.onload=()=>{var t;(t=e.meta)!=null&&t.isIframeOpen&&e.meta.loading&&(e.meta.loading=!1)})})})};return p(()=>r.fullPath,a=>{const e=i.list.find(s=>s.path===a);if(!e)return!1;e.meta.isIframeOpen||(e.meta.isIframeOpen=!0),f(a,e)},{immediate:!0}),p(()=>i.refreshKey,()=>{const a=i.list.find(e=>e.path===r.path);if(!a)return!1;a.meta.isIframeOpen&&(a.meta.isIframeOpen=!1),setTimeout(()=>{a.meta.isIframeOpen=!0,a.meta.loading=!0,f(r.fullPath,a)})},{deep:!0}),(a,e)=>{const s=O("loading");return l(),n("div",R,[v("div",x,[(l(!0),n(w,null,b(h(g),t=>y((l(),n("div",{class:"w100",key:t.path,"element-loading-background":"white"},[S(K,{name:d.name},{default:_(()=>[y((l(),n("iframe",{src:t.meta.isLink,key:t.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":t.path,ref_for:!0,ref_key:"iframeRef",ref:m},null,8,A)),[[E,h(c)===t.path]])]),_:2},1032,["name"])])),[[s,t.meta.loading]])),128))])])}}});export{L as default};
