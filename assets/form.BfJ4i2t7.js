import{u as W}from"./dict.BSIxxapr.js";import{v as X,r as n,d as k}from"./index.Baz8Le6O.js";import{v as z,a as A,p as E,b as G,g as J}from"./param.BF3TfWx3.js";import{a as x,r as h,a0 as K,al as p,at as M,Q as g,o as i,R as t,S as Y,u as e,X as o,b as T,F as C,ad as F,V as v,W as V,e as Z,H as ee,n as ae}from"./vue.Bq5FSDyb.js";import"./dict.BqnUiW2o.js";const le={class:"dialog-footer"},ue=x({name:"SysPublicParamDialog"}),te=x({...ue,emits:["refresh"],setup(re,{expose:N,emit:q}){const w=q,{t:d}=X.useI18n(),_=h(),m=h(!1),y=h(!1),{dict_type:B,status_type:L,param_type:S}=W("dict_type","status_type","param_type"),l=K({publicId:"",publicName:"",publicKey:"",publicValue:"",status:"0",validateCode:"",publicType:"0",systemFlag:"0"}),$=K({publicName:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(r,a,b)=>{A(r,a,b,l.publicId!=="")},trigger:"blur"}],publicKey:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:n.validatorCapital,trigger:"blur"},{validator:(r,a,b)=>{z(r,a,b,l.publicId!=="")},trigger:"blur"}],publicValue:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemFlag:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],validateCode:[{validator:n.overLength,trigger:"blur"}]}),D=async()=>{if(!await _.value.validate().catch(()=>{}))return!1;try{y.value=!0,l.publicId?await E(l):await G(l),k().success(d(l.publicId?"common.editSuccessText":"common.addSuccessText")),m.value=!1,w("refresh")}catch(r){k().error(r.msg)}finally{y.value=!1}},R=r=>{J(r).then(a=>{Object.assign(l,a.data)})};return N({openDialog:r=>{m.value=!0,l.publicId="",ae(()=>{var a;(a=_.value)==null||a.resetFields()}),r&&(l.publicId=r,R(r))}}),(r,a)=>{const b=p("el-radio"),I=p("el-radio-group"),s=p("el-form-item"),P=p("el-option"),j=p("el-select"),f=p("el-input"),H=p("el-form"),U=p("el-button"),O=p("el-dialog"),Q=M("loading");return i(),g(O,{"close-on-click-modal":!1,title:e(l).publicId?r.$t("common.editBtn"):r.$t("common.addBtn"),width:"600",draggable:"",modelValue:e(m),"onUpdate:modelValue":a[8]||(a[8]=u=>ee(m)?m.value=u:null)},{footer:t(()=>[Z("span",le,[o(U,{onClick:a[7]||(a[7]=u=>m.value=!1)},{default:t(()=>[v(V(r.$t("common.cancelButtonText")),1)]),_:1}),o(U,{onClick:D,type:"primary",disabled:e(y)},{default:t(()=>[v(V(r.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:t(()=>[Y((i(),g(H,{model:e(l),rules:e($),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:_},{default:t(()=>[o(s,{label:e(d)("param.systemFlag"),prop:"systemFlag"},{default:t(()=>[o(I,{modelValue:e(l).systemFlag,"onUpdate:modelValue":a[0]||(a[0]=u=>e(l).systemFlag=u)},{default:t(()=>[(i(!0),T(C,null,F(e(B),(u,c)=>(i(),g(b,{label:u.value,border:"",key:c},{default:t(()=>[v(V(u.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicType"),prop:"publicType"},{default:t(()=>[o(j,{placeholder:e(d)("param.inputpublicTypeTip"),modelValue:e(l).publicType,"onUpdate:modelValue":a[1]||(a[1]=u=>e(l).publicType=u)},{default:t(()=>[(i(!0),T(C,null,F(e(S),(u,c)=>(i(),g(P,{key:c,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.validateCode"),prop:"validateCode"},{default:t(()=>[o(f,{placeholder:e(d)("param.inputvalidateCodeTip"),modelValue:e(l).validateCode,"onUpdate:modelValue":a[2]||(a[2]=u=>e(l).validateCode=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicName"),prop:"publicName"},{default:t(()=>[o(f,{placeholder:e(d)("param.inputpublicNameTip"),modelValue:e(l).publicName,"onUpdate:modelValue":a[3]||(a[3]=u=>e(l).publicName=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicKey"),prop:"publicKey"},{default:t(()=>[o(f,{placeholder:e(d)("param.inputpublicKeyTip"),modelValue:e(l).publicKey,"onUpdate:modelValue":a[4]||(a[4]=u=>e(l).publicKey=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicValue"),prop:"publicValue"},{default:t(()=>[o(f,{placeholder:e(d)("param.inputpublicValueTip"),modelValue:e(l).publicValue,"onUpdate:modelValue":a[5]||(a[5]=u=>e(l).publicValue=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.status"),prop:"status"},{default:t(()=>[o(I,{modelValue:e(l).status,"onUpdate:modelValue":a[6]||(a[6]=u=>e(l).status=u)},{default:t(()=>[(i(!0),T(C,null,F(e(L),(u,c)=>(i(),g(b,{label:u.value,border:"",key:c},{default:t(()=>[v(V(u.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[Q,e(y)]])]),_:1},8,["title","modelValue"])}}});export{te as default};
