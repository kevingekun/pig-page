import{a as w,_ as b}from"./index.BZO6oVRg.js";import{g as z}from"./user.0O_Xzttw.js";import{p as I}from"./ibkr.DXzSQPXb.js";import{a as f,i as j,r as c,a0 as k,j as N,$ as _,n as L,al as m,Q as D,o as v,R,e,X as r,W as l,L as g,b as T,T as U}from"./vue.Bq5FSDyb.js";const X={style:{display:"flex","justify-content":"space-between"}},$={style:{display:"flex"}},Q={class:"info"},W={style:{"font-weight":"600",margin:"2px","font-size":"18px"}},q={style:{color:"#6d737b",margin:"2px"}},A={style:{margin:"2px"}},B={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},C={style:{display:"flex"}},E={class:"info"},F={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},G={style:{display:"flex"}},H={class:"info"},J={href:"https://e9v8mnhoz1kgjkp.255032.xyz/",target:"_blank"},K={key:0,style:{display:"flex"}},M=f({name:"currentUser"}),O=b(f({...M,setup(P){const{proxy:h}=j(),o=c(new Date),s=k({connected:!0,authenticated:!0}),i=c({postName:"",name:"",username:"",userId:"",avatar:"",deptName:""}),d=c(!1);setInterval(()=>{o.value=new Date},1e3),N(()=>{const t=w().userInfos;u(t.user.userId),y();const a=setInterval(y,1e4);_(()=>clearInterval(a))});const y=async()=>{try{let t=await I(null);t.code===0&&(s.connected=t.data.connected,s.authenticated=t.data.authenticated,await L())}catch{}},u=async t=>{var a,n;try{d.value=!0;const p=await z(t);i.value=p.data,i.value.postName=((n=(a=p.data)==null?void 0:a.postList)==null?void 0:n.map(x=>x.postName).join(","))||"",i.value.avatar=h.baseURL+p.data.avatar}finally{d.value=!1}};return(t,a)=>{const n=m("el-avatar"),p=m("el-card");return v(),D(p,{style:{height:"100%"}},{default:R(()=>[e("div",X,[e("div",$,[r(n,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/user.png"}),e("div",Q,[e("span",W,l(i.value.name),1),e("span",q,l(i.value.deptName)+" | "+l(i.value.postName),1)])]),e("span",A,l(t.parseTime(o.value)),1)]),e("div",B,[e("div",C,[r(n,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/connect.png"}),e("div",E,[a[0]||(a[0]=e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"ibkr\u8FDE\u63A5\u72B6\u6001",-1)),e("span",{style:g([{color:s.connected?"green":"red"},{margin:"2px"}])},l(s.connected?"\u5DF2\u8FDE\u63A5":"\u672A\u8FDE\u63A5"),5)])])]),e("div",F,[e("div",G,[r(n,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/auth.png"}),e("div",H,[a[1]||(a[1]=e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"ibkr\u8BA4\u8BC1\u72B6\u6001",-1)),e("span",{style:g([{color:s.connected?"green":"red"},{margin:"2px"}])},l(s.authenticated?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),5)])]),e("a",J,[s.authenticated?U("",!0):(v(),T("div",K,[r(n,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/go.png"}),a[2]||(a[2]=e("div",{class:"info"},[e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"\u53BB\u8BA4\u8BC1")],-1))]))])])]),_:1})}}}),[["__scopeId","data-v-0efa0b92"]]);export{O as default};
