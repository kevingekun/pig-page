import{a as w,_ as b}from"./index.Bmo3XfDz.js";import{g as z}from"./user.O1lTcmnZ.js";import{p as j}from"./ibkr.ziYwKd8p.js";import{a as f,i as I,r,a0 as k,j as _,$ as N,n as L,al as y,Q as D,o as h,R,e,X as c,W as o,L as v,b as U,T as W}from"./vue.Bq5FSDyb.js";const X={style:{display:"flex","justify-content":"space-between"}},Q={style:{display:"flex"}},T={class:"info"},$={style:{"font-weight":"600",margin:"2px","font-size":"18px"}},q={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},A={style:{display:"flex"}},B={class:"info"},C={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},E={style:{display:"flex"}},F={class:"info"},G={href:"https://e9v8mnhoz1kgjkp.255032.xyz/",target:"_blank"},H={key:0,style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},J={style:{display:"flex"}},K=f({name:"currentUser"}),M=b(f({...K,setup(O){const{proxy:g}=I(),u=r(new Date),a=k({connected:!0,authenticated:!1}),l=r({postName:"",name:"",username:"",userId:"",avatar:"",deptName:""}),p=r(!1);setInterval(()=>{u.value=new Date},1e3),_(()=>{const t=w().userInfos;x(t.user.userId),d();const s=setInterval(d,1e4);N(()=>clearInterval(s))});const d=async()=>{try{let t=await j(null);t.code===0&&(a.connected=t.data.connected,a.authenticated=t.data.authenticated,await L())}catch{}},x=async t=>{var s,i;try{p.value=!0;const n=await z(t);l.value=n.data,l.value.postName=((i=(s=n.data)==null?void 0:s.postList)==null?void 0:i.map(m=>m.postName).join(","))||"",l.value.avatar=g.baseURL+n.data.avatar}finally{p.value=!1}};return(t,s)=>{const i=y("el-avatar"),n=y("el-card");return h(),D(n,{style:{height:"100%"}},{default:R(()=>[e("div",X,[e("div",Q,[c(i,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/user.png"}),e("div",T,[e("span",$,o(l.value.name),1)])])]),e("div",q,[e("div",A,[c(i,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/connect.png"}),e("div",B,[e("span",{style:v([{color:a.connected?"green":"red"},{margin:"2px","font-weight":"600","font-size":"18px"}])}," ibkr "+o(a.connected?"\u5DF2\u8FDE\u63A5":"\u672A\u8FDE\u63A5"),5)])])]),e("div",C,[e("div",E,[c(i,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/auth.png"}),e("div",F,[e("span",{style:v([{color:a.authenticated?"green":"red"},{margin:"2px","font-weight":"600","font-size":"18px"}])}," ibkr "+o(a.authenticated?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),5)])])]),e("a",G,[a.authenticated?W("",!0):(h(),U("div",H,[e("div",J,[c(i,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/go.png"}),s[0]||(s[0]=e("div",{class:"info"},[e("span",{style:{color:"green",margin:"2px","font-weight":"600","font-size":"18px"}},"\u53BB\u8BA4\u8BC1")],-1))])]))])]),_:1})}}}),[["__scopeId","data-v-f06b6d15"]]);export{M as default};
