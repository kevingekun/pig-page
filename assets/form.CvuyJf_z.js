import{u as D}from"./table.CI3y5Mow.js";import{f as L,d as T}from"./table.CSIiP-V7.js";import{v as I,k as j,d as p}from"./index.Bmo3XfDz.js";import{a as h,aE as E,r as O,a0 as Q,al as r,at as R,Q as f,o as C,R as n,S as U,X as o,u as a,V as y,O as X,H as A}from"./vue.Bq5FSDyb.js";const B=h({name:"systemFormHistoryDialog"}),G=h({...B,emits:["refresh"],setup(J,{expose:w,emit:b}){const x=b,v=E(),{t:m}=I.useI18n(),s=O(!1),t=Q({queryForm:{},pageList:L,createdIsNeed:!1,descs:["create_time"]}),{getDataList:u,currentChangeHandle:S,sizeChangeHandle:_,sortChangeHandle:k}=D(t);return w({openDialog:()=>{const{tableName:c,dsName:e}=v.query;s.value=!0,t.queryForm.dsName=e,t.queryForm.tableName=c,u()}}),(c,e)=>{const d=r("el-table-column"),g=r("el-button"),H=r("el-table"),N=r("pagination"),q=r("el-drawer"),F=R("loading");return C(),f(q,{title:"\u8BBE\u8BA1\u5386\u53F2",modelValue:a(s),"onUpdate:modelValue":e[0]||(e[0]=l=>A(s)?s.value=l:null),draggable:""},{default:n(()=>[U((C(),f(H,{data:a(t).dataList,style:{width:"100%"},onSortChange:a(k)},{default:n(()=>[o(d,{type:"index",label:"\u5E8F\u53F7",width:"60"}),o(d,{prop:"createTime",label:"\u8BBE\u8BA1\u65F6\u95F4","show-overflow-tooltip":""}),o(d,{label:"\u64CD\u4F5C",width:"150"},{default:n(l=>[o(g,{icon:"refresh",text:"",type:"primary",onClick:V=>{return i=l.row.id,void x("refresh",i);var i}},{default:n(()=>e[1]||(e[1]=[y("\u56DE\u6EDA")])),_:2},1032,["onClick"]),o(g,{icon:"delete",text:"",type:"primary",onClick:V=>(async i=>{try{await j().confirm(m("common.delConfirmText"))}catch{return}try{await T(i),u(),p().success(m("common.delSuccessText"))}catch(z){p().error(z.msg)}})(l.row.id)},{default:n(()=>e[2]||(e[2]=[y("\u5220\u9664")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange"])),[[F,a(t).loading]]),o(N,X({onSizeChange:a(_),onCurrentChange:a(S)},a(t).pagination),null,16,["onSizeChange","onCurrentChange"])]),_:1},8,["modelValue"])}}});export{G as default};
