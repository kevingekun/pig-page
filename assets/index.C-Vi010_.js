import{a as _,aG as G,r as v,a0 as W,j as X,al as r,at as Y,b as q,o as y,e as k,S,X as l,Y as A,u as e,R as t,ab as J,F as M,ad as P,Q as T,V as h,W as f,H as Z,O as ee}from"./vue.Bq5FSDyb.js";import{u as le}from"./table.v2Tuu68u.js";import{j as ae,g as te,k as oe}from"./table.DKXxoG2C.js";import{l as ne}from"./datasource.-d1iLmiu.js";import{v as re,z as se,d as me}from"./index.BZO6oVRg.js";const ue={class:"layout-padding"},de={class:"layout-padding-auto layout-padding-view"},ie={class:"mb8",style:{width:"100%"}},pe=_({name:"systemTable"}),ce=_({...pe,setup(be){const V=G(),{t:u}=re.useI18n(),w=v(),i=v(!0),p=v(),a=W({queryForm:{dsName:"master"},pageList:ae,createdIsNeed:!1}),{getDataList:s,currentChangeHandle:$,sizeChangeHandle:z,downBlobFile:B,tableStyle:C}=le(a);X(()=>{ne().then(n=>{p.value=n.data,p.value.length>0&&(a.queryForm.dsName=p.value[0].name),s()})});const N=n=>{oe(a.queryForm.dsName,n.name).then(()=>{me().success(u("common.optSuccessText"))})},L=()=>{w.value.resetFields(),s()},R=()=>{B("/gen/table/export",a.queryForm,"table.xlsx")};return(n,m)=>{const x=r("el-option"),H=r("el-select"),g=r("el-form-item"),K=r("el-input"),c=r("el-button"),Q=r("el-form"),F=r("el-row"),U=r("right-toolbar"),d=r("el-table-column"),j=r("el-table"),D=r("pagination"),E=Y("loading");return y(),q("div",ue,[k("div",de,[S(l(F,{class:"ml10"},{default:t(()=>[l(Q,{inline:!0,model:e(a).queryForm,onKeyup:J(e(s),["enter"]),ref_key:"queryRef",ref:w},{default:t(()=>[l(g,{label:"\u6570\u636E\u6E90",prop:"name"},{default:t(()=>[l(H,{onChange:e(s),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",modelValue:e(a).queryForm.dsName,"onUpdate:modelValue":m[0]||(m[0]=o=>e(a).queryForm.dsName=o)},{default:t(()=>[l(x,{label:"\u9ED8\u8BA4\u6570\u636E\u6E90",value:"master"}),(y(!0),q(M,null,P(e(p),o=>(y(),T(x,{key:o.id,label:o.name,value:o.name},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1}),l(g,{label:n.$t("table.tableName"),prop:"tableName"},{default:t(()=>[l(K,{placeholder:n.$t("table.inputtableNameTip"),modelValue:e(a).queryForm.tableName,"onUpdate:modelValue":m[1]||(m[1]=o=>e(a).queryForm.tableName=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(g,null,{default:t(()=>[l(c,{onClick:e(s),icon:"search",type:"primary"},{default:t(()=>[h(f(n.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),l(c,{onClick:L,icon:"Refresh"},{default:t(()=>[h(f(n.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[A,e(i)]]),l(F,null,{default:t(()=>[k("div",ie,[l(U,{export:!0,onExportExcel:R,onQueryTable:e(s),class:"ml10",style:{float:"right","margin-right":"20px"},showSearch:e(i),"onUpdate:showSearch":m[2]||(m[2]=o=>Z(i)?i.value=o:null)},null,8,["onQueryTable","showSearch"])])]),_:1}),S((y(),T(j,{data:e(a).dataList,style:{width:"100%"},border:"","cell-style":e(C).cellStyle,"header-cell-style":e(C).headerCellStyle},{default:t(()=>[l(d,{label:e(u)("table.index"),type:"index",width:"60"},null,8,["label"]),l(d,{label:e(u)("table.tableName"),prop:"name","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:e(u)("table.tableDesc"),prop:"comment","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:e(u)("table.createTime"),prop:"createTime","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:n.$t("common.action"),width:"250"},{default:t(o=>[l(c,{icon:"Refresh",onClick:I=>N(o.row),text:"",type:"primary"},{default:t(()=>[h(f(n.$t("gen.syncBtn")),1)]),_:2},1032,["onClick"]),l(c,{icon:"FolderOpened",onClick:I=>{return b=o.row,void te(a.queryForm.dsName,b.name).then(O=>{se(O.data.fieldList)&&N(b)}).finally(()=>{V.push({path:"/gen/gener/index",query:{tableName:b.name,dsName:a.queryForm.dsName}})});var b},text:"",type:"primary"},{default:t(()=>[h(f(n.$t("gen.genBtn")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[E,e(a).loading]]),l(D,ee({onCurrentChange:e($),onSizeChange:e(z)},e(a).pagination),null,16,["onCurrentChange","onSizeChange"])])])}}});export{ce as default};
