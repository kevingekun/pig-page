import{v as B,r as p,d as f}from"./index.-C1ni1oB.js";import{v as D,g as S,p as R,a as j}from"./dict.GOnh5BUf.js";import{a as v,r as b,a0 as h,al as c,at as C,b as F,o as V,X as r,R as i,S as H,Q,u as t,e as W,V as T,W as y,H as X,n as z}from"./vue.Bq5FSDyb.js";const A={class:"system-dic-dialog-container"},E={class:"dialog-footer"},G=v({name:"dict-item-form"}),J=v({...G,emits:["refresh"],setup(K,{expose:I,emit:$}){const _=$,{t:k}=B.useI18n(),n=b(),u=b(!1),m=b(!1),l=h({id:"",dictId:"",dictType:"",value:"",label:"",description:"",sortOrder:0,remarks:""}),x=h({value:[{validator:p.overLength,trigger:"blur"},{required:!0,message:"\u6570\u636E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],label:[{validator:p.overLength,trigger:"blur"},{required:!0,message:"\u6807\u7B7E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(e,a,o)=>{D(e,a,o,l.dictType,l.id!=="")},trigger:"blur"}],description:[{validator:p.overLength,trigger:"blur"},{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{validator:p.overLength,trigger:"blur"},{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),O=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;try{m.value=!0,l.id?await R(l):await j(l),f().success(k(l.id?"common.editSuccessText":"common.addSuccessText")),u.value=!1,_("refresh")}catch(e){f().error(e.msg)}finally{m.value=!1}};return I({openDialog:(e,a)=>{u.value=!0,l.id="",z(()=>{var o;(o=n.value)==null||o.resetFields(),a&&(l.dictId=a.dictId,l.dictType=a.dictType)}),e!=null&&e.id&&S(e.id).then(o=>{Object.assign(l,o.data)})}}),(e,a)=>{const o=c("el-input"),s=c("el-form-item"),U=c("el-input-number"),w=c("el-form"),g=c("el-button"),L=c("el-dialog"),q=C("loading");return V(),F("div",A,[r(L,{modelValue:t(u),"onUpdate:modelValue":a[7]||(a[7]=d=>X(u)?u.value=d:null),title:t(l).id?e.$t("common.editBtn"):e.$t("common.addBtn"),width:"600"},{footer:i(()=>[W("span",E,[r(g,{onClick:a[6]||(a[6]=d=>u.value=!1)},{default:i(()=>[T(y(e.$t("common.cancelButtonText")),1)]),_:1}),r(g,{type:"primary",onClick:O,disabled:t(m)},{default:i(()=>[T(y(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:i(()=>[H((V(),Q(w,{ref_key:"dicDialogFormRef",ref:n,model:t(l),"label-width":"90px",rules:t(x)},{default:i(()=>[r(s,{label:e.$t("dictItem.dictType"),prop:"dictType"},{default:i(()=>[r(o,{modelValue:t(l).dictType,"onUpdate:modelValue":a[0]||(a[0]=d=>t(l).dictType=d),clearable:"",disabled:"",placeholder:e.$t("dictItem.inputDictTypeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e.$t("dictItem.label"),prop:"label"},{default:i(()=>[r(o,{modelValue:t(l).label,"onUpdate:modelValue":a[1]||(a[1]=d=>t(l).label=d),placeholder:e.$t("dictItem.inputLabelTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e.$t("dictItem.itemValue"),prop:"value"},{default:i(()=>[r(o,{modelValue:t(l).value,"onUpdate:modelValue":a[2]||(a[2]=d=>t(l).value=d),placeholder:e.$t("dictItem.inputItemValueTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e.$t("dictItem.description"),prop:"description"},{default:i(()=>[r(o,{modelValue:t(l).description,"onUpdate:modelValue":a[3]||(a[3]=d=>t(l).description=d),placeholder:e.$t("dictItem.inputDescriptionTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e.$t("dictItem.sortOrder"),prop:"sortOrder"},{default:i(()=>[r(U,{modelValue:t(l).sortOrder,"onUpdate:modelValue":a[4]||(a[4]=d=>t(l).sortOrder=d),placeholder:e.$t("dictItem.inputSortOrderTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(s,{label:e.$t("dictItem.remarks"),prop:"remarks"},{default:i(()=>[r(o,{modelValue:t(l).remarks,"onUpdate:modelValue":a[5]||(a[5]=d=>t(l).remarks=d),type:"textarea",rows:"3",placeholder:e.$t("dictItem.inputRemarksTip"),maxlength:"150"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[q,t(m)]])]),_:1},8,["modelValue","title"])])}}});export{J as default};
