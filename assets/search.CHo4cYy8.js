import{b as x,v as I,_ as Q}from"./index.Zpg3H9AI.js";import{a as p,aA as b,r as k,aG as C,a0 as R,al as o,b as A,o as O,X as l,R as c,u as m,e as U,V as $,W as B,n as G}from"./vue.Bq5FSDyb.js";const H={class:"layout-search-dialog"},M=p({name:"layoutBreadcrumbSearch"}),P=Q(p({...M,setup(T,{expose:f}){const w=x(),{tagsViewRoutes:S}=b(w),d=k(),{t:g}=I.useI18n(),h=C(),s=R({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),V=(e,a)=>{a(e?s.tagsViewList.filter(L(e)):s.tagsViewList)},L=e=>a=>a.path.toLowerCase().indexOf(e.toLowerCase())>-1||g(a.name).indexOf(e.toLowerCase())>-1,y=()=>{if(s.tagsViewList.length>0)return!1;S.value.map(e=>{var a;(a=e.meta)!=null&&a.isHide||s.tagsViewList.push({...e})})},_=e=>{var r,u,n;let{path:a,redirect:i}=e;(r=e.meta)!=null&&r.isLink&&!((u=e.meta)!=null&&u.isIframe)?window.open((n=e.meta)==null?void 0:n.isLink):i?h.push(i):h.push(a),s.isShowSearch=!1};return f({openSearch:()=>{s.menuQuery="",s.isShowSearch=!0,y(),G(()=>{setTimeout(()=>{d.value.focus()})})}}),(e,a)=>{const i=o("ele-Search"),r=o("el-icon"),u=o("SvgIcon"),n=o("el-autocomplete"),v=o("el-dialog");return O(),A("div",H,[l(v,{modelValue:m(s).isShowSearch,"onUpdate:modelValue":a[1]||(a[1]=t=>m(s).isShowSearch=t),"destroy-on-close":"","show-close":!1},{footer:c(()=>[l(n,{modelValue:m(s).menuQuery,"onUpdate:modelValue":a[0]||(a[0]=t=>m(s).menuQuery=t),"fetch-suggestions":V,placeholder:e.$t("user.searchPlaceholder"),ref_key:"layoutMenuAutocompleteRef",ref:d,onSelect:_,"fit-input-width":!0},{prefix:c(()=>[l(r,{class:"el-input__icon"},{default:c(()=>[l(i)]),_:1})]),default:c(({item:t})=>[U("div",null,[l(u,{name:t.meta.icon,class:"mr5"},null,8,["name"]),$(" "+B(e.$t(t.name)),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-0535ceac"]]);export{P as default};
