import{a as g,_ as w}from"./index.BD7QhO6d.js";import{g as b}from"./user.BnFLHXwa.js";import{p as z}from"./ibkr.bXhzeG3B.js";import{a as v,i as I,r as o,a0 as j,j as k,$ as N,n as _,al as f,Q as D,o as u,R as L,e,X as r,W as n,b as R,T}from"./vue.Bq5FSDyb.js";const U={style:{display:"flex","justify-content":"space-between"}},$={style:{display:"flex"}},q={class:"info"},Q={style:{"font-weight":"600",margin:"2px","font-size":"18px"}},W={style:{color:"#6d737b",margin:"2px"}},X={style:{margin:"2px"}},A={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},B={style:{display:"flex"}},C={class:"info"},E={style:{color:"#6d737b",margin:"2px"}},F={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},G={style:{display:"flex"}},H={class:"info"},J={style:{color:"#6d737b",margin:"2px"}},K={href:"https://e9v8mnhoz1kgjkp.255032.xyz/",target:"_blank"},M={key:0,style:{display:"flex"}},O=v({name:"currentUser"}),P=w(v({...O,setup(S){const{proxy:x}=I(),c=o(new Date),l=j({connected:!1,authenticated:!1}),s=o({postName:"",name:"",username:"",userId:"",avatar:"",deptName:""}),d=o(!1);setInterval(()=>{c.value=new Date},1e3),k(()=>{const t=g().userInfos;h(t.user.userId),y();const a=setInterval(y,1e4);N(()=>clearInterval(a))});const y=async()=>{try{let t=await z(null);t.code===0&&(l.connected=t.data.connected,l.authenticated=t.data.authenticated,await _())}catch{}},h=async t=>{var a,i;try{d.value=!0;const p=await b(t);s.value=p.data,s.value.postName=((i=(a=p.data)==null?void 0:a.postList)==null?void 0:i.map(m=>m.postName).join(","))||"",s.value.avatar=x.baseURL+p.data.avatar}finally{d.value=!1}};return(t,a)=>{const i=f("el-avatar"),p=f("el-card");return u(),D(p,{style:{height:"100%"}},{default:L(()=>[e("div",U,[e("div",$,[r(i,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover",src:s.value.avatar},null,8,["src"]),e("div",q,[e("span",Q,n(s.value.name),1),e("span",W,n(s.value.deptName)+" | "+n(s.value.postName),1)])]),e("span",X,n(t.parseTime(c.value)),1)]),e("div",A,[e("div",B,[r(i,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover"}),e("div",C,[a[0]||(a[0]=e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"ibkr\u8FDE\u63A5\u72B6\u6001",-1)),e("span",E,n(l.connected?"\u5DF2\u8FDE\u63A5":"\u672A\u8FDE\u63A5"),1)])])]),e("div",F,[e("div",G,[r(i,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover"}),e("div",H,[a[1]||(a[1]=e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"ibkr\u8BA4\u8BC1\u72B6\u6001",-1)),e("span",J,n(l.authenticated?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),1)])]),e("a",K,[l.authenticated?T("",!0):(u(),R("div",M,[r(i,{style:{width:"60px",height:"60px"},shape:"circle",size:100,fit:"cover"}),a[2]||(a[2]=e("div",{class:"info"},[e("span",{style:{"font-weight":"600",margin:"2px","font-size":"18px"}},"\u53BB\u8BA4\u8BC1")],-1))]))])])]),_:1})}}}),[["__scopeId","data-v-e598827e"]]);export{P as default};
