import{H as w,u as F,e as o,I as G,_ as J}from"./index.VbW3VsEx.js";import{a as P,r as _,aA as j,aE as W,aG as X,a0 as q,j as z,$ as B,aJ as K,k as Q,al as N,b as m,o as c,X as H,R as U,e as h,F as V,ad as Y,u as i,M as y,W as D,n as Z}from"./vue.Bq5FSDyb.js";const ee={class:"layout-columns-aside"},le=["onClick","onMouseenter","title"],te={class:"columns-vertical-title font12"},ne=["href"],se={class:"columns-vertical-title font12"},ae=P({name:"layoutColumnsAside"}),ie=J(P({...ae,setup(oe){const L=_([]),x=_(),f=w(),R=F(),{routesList:I,isColumnsMenuHover:T,isColumnsNavHover:E}=j(f),{themeConfig:u}=j(R),O=W(),$=X(),t=q({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=e=>{t.liIndex=e,x.value.style.top=`${L.value[e].offsetTop+t.difference}px`},S=e=>{Z(()=>{g(e)})},d=e=>{const n=k(I.value,e);let a={children:[]};return t.columnsAsideList.map((s,l)=>{s.path===n.path&&(s.k=l,a.item={...s},a.children=[{...s}],s.children&&(a.children=s.children))}),a},M=e=>e.filter(n=>{var a;return!((a=n.meta)!=null&&a.isHide)}).map(n=>((n=Object.assign({},n)).children&&(n.children=M(n.children)),n)),k=(e,n)=>{let a;return e.forEach(s=>{s.path!==n?s.children&&k(s.children,n)&&(a=s):a=s}),a};return z(()=>{(()=>{var n;t.columnsAsideList=M(I.value);const e=d(O.path);if(Object.keys(e).length<=0)return!1;S((n=e.item)==null?void 0:n.k),o.emit("setSendColumnsChildren",e)})(),o.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),B(()=>{o.off("restoreDefault",()=>{})}),K(e=>{(n=>{const a=k(I.value,n),s=t.columnsAsideList.find(l=>l.path===a.path);if(!s)return!1;setTimeout(()=>{S(s.k)},0)})(e.path),o.emit("setSendColumnsChildren",d(e.path))}),Q(G.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,e.routesList.isColumnsMenuHover||e.routesList.isColumnsNavHover){if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;o.emit("setSendColumnsChildren",d(t.liOldPath))}else t.liHoverIndex=null,o.emit("setSendColumnsChildren",d(O.path))},{deep:!0}),(e,n)=>{const a=N("SvgIcon"),s=N("el-scrollbar");return c(),m("div",ee,[H(s,null,{default:U(()=>[h("ul",{onMouseleave:n[0]||(n[0]=l=>(async()=>{await f.setColumnsNavHover(!1),setTimeout(()=>{T||E||o.emit("restoreDefault")},100)})())},[(c(!0),m(V,null,Y(i(t).columnsAsideList,(l,r)=>(c(),m("li",{key:r,onClick:v=>((A,p)=>{g(p);let{path:C,redirect:b}=A;b?$.push(b):$.push(C)})(l,r),onMouseenter:v=>((A,p)=>{if(!u.value.isColumnsMenuHoverPreload)return!1;let{path:C}=A;t.liOldPath=C,t.liOldIndex=p,t.liHoverIndex=p,o.emit("setSendColumnsChildren",d(C)),f.setColumnsMenuHover(!1),f.setColumnsNavHover(!0)})(l,r),ref_for:!0,ref:v=>{v&&(i(L)[r]=v)},class:y({"layout-columns-active":i(t).liIndex===r,"layout-columns-hover":i(t).liHoverIndex===r}),title:e.$t(l.name)},[!l.meta.isLink||l.meta.isLink&&l.meta.isIframe?(c(),m("div",{key:0,class:y(i(u).columnsAsideLayout)},[H(a,{name:l.meta.icon},null,8,["name"]),h("div",te,D(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],2)):(c(),m("div",{key:1,class:y(i(u).columnsAsideLayout)},[h("a",{href:l.meta.isLink,target:"_blank"},[H(a,{name:l.meta.icon},null,8,["name"]),h("div",se,D(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],8,ne)],2))],42,le))),128)),h("div",{ref_key:"columnsAsideActiveRef",ref:x,class:y(i(u).columnsAsideStyle)},null,2)],32)]),_:1})])}}}),[["__scopeId","data-v-5d293f07"]]);export{ie as default};
