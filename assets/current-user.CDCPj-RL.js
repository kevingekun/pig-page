import{a as w,_ as z}from"./index.C0rhdPVG.js";import{g as b}from"./user.CJCZLOAi.js";import{p as j}from"./ibkr.BEhmFZqZ.js";import{a as f,i as I,r,a0 as k,j as _,$ as N,n as L,al as y,Q as D,o as h,R,e,X as l,W as o,L as v,b as U,T as W}from"./vue.Bq5FSDyb.js";const X={style:{display:"flex","justify-content":"space-between"}},Q={style:{display:"flex"}},T={class:"info"},$={style:{"font-weight":"600",margin:"2px","font-size":"18px"}},q={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},A={style:{display:"flex"}},B={class:"info"},C={style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},E={style:{display:"flex"}},F={class:"info"},G={href:"https://e9v8mnhoz1kgjkp.255032.xyz/",target:"_blank"},H={key:0,style:{display:"flex","justify-content":"space-between","margin-top":"20px"}},J={style:{display:"flex"}},K=f({name:"currentUser"}),M=z(f({...K,setup(O){const{proxy:g}=I(),u=r(new Date),a=k({connected:!0,authenticated:!1}),c=r({postName:"",name:"",username:"",userId:"",avatar:"",deptName:""}),p=r(!1);setInterval(()=>{u.value=new Date},1e3),_(()=>{const t=w().userInfos;x(t.user.userId),d();const s=setInterval(d,1e4);N(()=>clearInterval(s))});const d=async()=>{try{let t=await j(null);t.code===0&&(a.connected=t.data.connected,a.authenticated=t.data.authenticated,await L())}catch{}},x=async t=>{var s,n;try{p.value=!0;const i=await b(t);c.value=i.data,c.value.postName=((n=(s=i.data)==null?void 0:s.postList)==null?void 0:n.map(m=>m.postName).join(","))||"",c.value.avatar=g.baseURL+i.data.avatar}finally{p.value=!1}};return(t,s)=>{const n=y("el-avatar"),i=y("el-card");return h(),D(i,{style:{height:"100%"}},{default:R(()=>[e("div",X,[e("div",Q,[l(n,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/user.png"}),e("div",T,[e("span",$,o(c.value.name),1)])])]),e("div",q,[e("div",A,[l(n,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/connect.png"}),e("div",B,[e("span",{style:v([{color:a.connected?"green":"red"},{margin:"2px","font-weight":"600","font-size":"18px"}])}," ibkr "+o(a.connected?"\u5DF2\u8FDE\u63A5":"\u672A\u8FDE\u63A5"),5)])])]),e("div",C,[e("div",E,[l(n,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/auth.png"}),e("div",F,[e("span",{style:v([{color:a.connected?"green":"red"},{margin:"2px","font-weight":"600","font-size":"18px"}])}," ibkr "+o(a.authenticated?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),5)])])]),e("a",G,[a.authenticated?W("",!0):(h(),U("div",H,[e("div",J,[l(n,{style:{width:"30px",height:"30px"},shape:"circle",size:100,fit:"cover",src:"./assets/images/go.png"}),s[0]||(s[0]=e("div",{class:"info"},[e("span",{style:{color:"green",margin:"2px","font-weight":"600","font-size":"18px"}},"\u53BB\u8BA4\u8BC1")],-1))])]))])]),_:1})}}}),[["__scopeId","data-v-dfc4d763"]]);export{M as default};
