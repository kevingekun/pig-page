import{a as p,aA as y,a0 as g,m as b,j as I,$ as M,k as _,al as S,Q as V,o as n,R as E,S as W,b as s,L as m,e as c,F as x,ad as $,T as j,X as R,W as A,Y as O,Z as T}from"./vue.Bq5FSDyb.js";import{b as F,_ as z}from"./index.BZO6oVRg.js";const D={class:"el-dropdown-menu"},Q=["onClick"],X=p({name:"layoutTagsViewContextmenu"}),Y=z(p({...X,props:{dropdown:{type:Object,default:()=>({x:0,y:0})}},emits:["currentContextmenuClick"],setup(f,{expose:w,emit:h}){const C=F(),{favoriteRoutes:k}=y(C),a=f,v=h,e=g({isShow:!1,dropdownList:[{contextMenuClickId:0,txt:"tagsView.refresh",affix:!1,show:!0,icon:"ele-RefreshRight"},{contextMenuClickId:1,txt:"tagsView.close",affix:!1,show:!0,icon:"ele-Close"},{contextMenuClickId:2,txt:"tagsView.closeOther",affix:!1,show:!0,icon:"ele-CircleClose"},{contextMenuClickId:3,txt:"tagsView.closeAll",affix:!1,show:!0,icon:"ele-FolderDelete"},{contextMenuClickId:4,txt:"tagsView.fullscreen",affix:!1,show:!0,icon:"iconfont icon-fullscreen"},{contextMenuClickId:5,txt:"tagsView.favorite",affix:!1,show:!0,icon:"ele-Star"}],item:{},arrowLeft:10}),r=b(()=>a.dropdown.x+117>document.documentElement.clientWidth?{x:document.documentElement.clientWidth-117-5,y:a.dropdown.y}:a.dropdown),i=()=>{e.isShow=!1};return I(()=>{document.body.addEventListener("click",i)}),M(()=>{document.body.removeEventListener("click",i)}),_(()=>a.dropdown,({x:t})=>{t+117>document.documentElement.clientWidth?e.arrowLeft=117-(document.documentElement.clientWidth-t):e.arrowLeft=10},{deep:!0}),w({openContextmenu:t=>{var l;e.item=t,(l=t.meta)!=null&&l.isAffix?e.dropdownList[1].affix=!0:e.dropdownList[1].affix=!1,k.value.find(d=>d.path===t.path)?e.dropdownList[5].show=!1:e.dropdownList[5].show=!0,i(),setTimeout(()=>{e.isShow=!0},10)}}),(t,l)=>{const d=S("SvgIcon");return n(),V(T,{name:"el-zoom-in-center"},{default:E(()=>[W((n(),s("div",{"aria-hidden":"true",class:"el-dropdown__popper el-popper is-light is-pure custom-contextmenu",role:"tooltip","data-popper-placement":"bottom",style:m(`top: ${r.value.y+5}px;left: ${r.value.x}px;`),key:Math.random()},[c("ul",D,[(n(!0),s(x,null,$(e.dropdownList,(o,L)=>(n(),s(x,null,[!o.affix&&o.show?(n(),s("li",{class:"el-dropdown-menu__item","aria-disabled":"false",tabindex:"-1",key:L,onClick:Z=>{return u=o.contextMenuClickId,void v("currentContextmenuClick",Object.assign({},{contextMenuClickId:u},e.item));var u}},[R(d,{name:o.icon},null,8,["name"]),c("span",null,A(t.$t(o.txt)),1)],8,Q)):j("",!0)],64))),256))]),c("div",{class:"el-popper__arrow",style:m({left:`${e.arrowLeft}px`})},null,4)],4)),[[O,e.isShow]])]),_:1})}}}),[["__scopeId","data-v-addc29bd"]]);export{Y as default};
