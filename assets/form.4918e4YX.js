import{v as L,d as v,r as c}from"./index.BZO6oVRg.js";import{p as $,a as F,g as j,v as D,b as R}from"./post.BZ7KIqUd.js";import{a as h,r as g,a0 as H,al as m,at as O,Q as V,o as k,R as d,S as P,u as e,X as r,e as Q,V as y,W as S,H as W,n as X}from"./vue.Bq5FSDyb.js";const z={class:"dialog-footer"},A=h({name:"systemPostDialog"}),E=h({...A,emits:["refresh"],setup(G,{expose:T,emit:x}){const C=x,{t:s}=L.useI18n(),b=g(),u=g(!1),i=g(!1),a=H({postId:"",postCode:"",postName:"",postSort:0,remark:"",delFlag:"",createTime:"",createBy:"",updateTime:"",updateBy:""}),I=g({postCode:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(o,t,p)=>{R(o,t,p,a.postId!=="")},trigger:"blur"}],postName:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(o,t,p)=>{D(o,t,p,a.postId!=="")},trigger:"blur"}],postSort:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],remark:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=async()=>{if(!await b.value.validate().catch(()=>{}))return!1;try{i.value=!0,a.postId?await $(a):await F(a),v().success(s(a.postId?"common.editSuccessText":"common.addSuccessText")),u.value=!1,C("refresh")}catch(o){v().error(o.msg)}finally{i.value=!1}},N=o=>{j(o).then(t=>{Object.assign(a,t.data)})};return T({openDialog:o=>{u.value=!0,a.postId="",X(()=>{var t;(t=b.value)==null||t.resetFields()}),o&&(a.postId=o,N(o))}}),(o,t)=>{const p=m("el-input"),n=m("el-form-item"),w=m("el-input-number"),B=m("el-form"),f=m("el-button"),U=m("el-dialog"),q=O("loading");return k(),V(U,{title:e(a).postId?o.$t("common.editBtn"):o.$t("common.addBtn"),width:"600",modelValue:e(u),"onUpdate:modelValue":t[5]||(t[5]=l=>W(u)?u.value=l:null),"close-on-click-modal":!1,draggable:""},{footer:d(()=>[Q("span",z,[r(f,{onClick:t[4]||(t[4]=l=>u.value=!1)},{default:d(()=>[y(S(o.$t("common.cancelButtonText")),1)]),_:1}),r(f,{type:"primary",onClick:_,disabled:e(i)},{default:d(()=>[y(S(o.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[P((k(),V(B,{ref_key:"dataFormRef",ref:b,model:e(a),rules:e(I),"label-width":"90px"},{default:d(()=>[r(n,{label:e(s)("post.postCode"),prop:"postCode"},{default:d(()=>[r(p,{modelValue:e(a).postCode,"onUpdate:modelValue":t[0]||(t[0]=l=>e(a).postCode=l),placeholder:e(s)("post.inputpostCodeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postName"),prop:"postName"},{default:d(()=>[r(p,{modelValue:e(a).postName,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).postName=l),placeholder:e(s)("post.inputpostNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postSort"),prop:"postSort"},{default:d(()=>[r(w,{modelValue:e(a).postSort,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).postSort=l),placeholder:e(s)("post.inputpostSortTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.remark"),prop:"remark"},{default:d(()=>[r(p,{type:"textarea",maxlength:"150",rows:"3",modelValue:e(a).remark,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).remark=l),placeholder:e(s)("post.inputremarkTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[q,e(i)]])]),_:1},8,["title","modelValue"])}}});export{E as default};
