import{d as R,_ as $}from"./index.BD7QhO6d.js";import{a as k,a0 as A,r as m,m as H,j as I,al as l,b as x,o as v,e as _,X as o,T as K,u as t,H as O,R as d,M as S,V as U,W,ac as X,K as z}from"./vue.Bq5FSDyb.js";const D={class:"head-container"},G={class:"head-container-header"},J={class:"head-container-header-input"},P={key:0,class:"head-container-header-dropdown"},Q=k({name:"query-tree"}),Y=$(k({...Q,props:{props:{type:Object,default:()=>({label:"name",children:"children",value:"id"})},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},query:{type:Function,required:!0},showExpand:{type:Boolean,default:!1}},emits:["search","nodeClick"],setup(u,{expose:w,emit:q}){const b=q,n=u,r=A({List:[],localLoading:n.loading}),y=m(),s=m(),i=m(!0),L=H(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),C=e=>{b("nodeClick",e)},f=()=>{if(n.query instanceof Function){r.localLoading=!0;const e=n.query(t(s));typeof e!="object"&&typeof e!="function"||typeof e.then!="function"||e.then(a=>{r.List=a.data}).catch(a=>{R().error(a.msg)})}};return I(()=>{f()}),w({getdeptTree:f}),(e,a)=>{const j=l("el-input"),V=l("MoreFilled"),F=l("el-icon"),T=l("el-button"),B=l("el-dropdown-item"),E=l("el-dropdown-menu"),M=l("el-dropdown"),N=l("el-tree");return v(),x("div",D,[_("div",G,[_("div",J,[o(j,{modelValue:t(s),"onUpdate:modelValue":a[0]||(a[0]=c=>O(s)?s.value=c:null),"suffix-icon":"search",placeholder:u.placeholder,clearable:"",onChange:f},null,8,["modelValue","placeholder"])]),u.showExpand?(v(),x("div",P,[o(M,{"hide-on-click":!1},{dropdown:d(()=>[o(E,null,{default:d(()=>[o(B,null,{default:d(()=>[o(T,{class:S(t(L)),link:"",type:"primary",icon:t(i)?"expand":"fold",onClick:a[1]||(a[1]=c=>(p=>{i.value=p;const g=y.value.store._getAllNodes();for(let h=0;h<g.length;h++)g[h].expanded=p})(!t(i)))},{default:d(()=>[U(W(t(i)?"\u6298\u53E0":"\u5C55\u5F00"),1)]),_:1},8,["class","icon"])]),_:1})]),_:1})]),default:d(()=>[o(F,{style:{transform:"rotate(90deg)"}},{default:d(()=>[o(V)]),_:1})]),_:1})])):K("",!0)]),o(N,{class:"mt20",data:t(r).List,props:n.props,"expand-on-click-node":!1,ref_key:"deptTreeRef",ref:y,loading:t(r).localLoading,"node-key":"id","highlight-current":"","default-expand-all":"",onNodeClick:C},X({_:2},[e.$slots.default?{name:"default",fn:d(({node:c,data:p})=>[z(e.$slots,"default",{node:c,data:p},void 0,!0)]),key:"0"}:void 0]),1032,["data","props","loading"])])}}}),[["__scopeId","data-v-fa9e5237"]]);export{Y as default};
