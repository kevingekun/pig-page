import{g as $,p as M}from"./table.Cy_kuYqY.js";import{l as Q}from"./group.Dc9pgRjG.js";import{c as X,o as Z}from"./template.BuRFzMnY.js";import{L as V,k as A,d as B,r as s,_ as E}from"./index.XaB_BWRs.js";import{a as G,r as b,a0 as J,k as K,j as W,al as p,at as Y,S as ee,u as r,o as h,Q as y,R as l,X as e,e as c,b as ae,F as le,ad as te,V as k,T as x}from"./vue.Bq5FSDyb.js";const re=E(G({__name:"generator",props:{tableName:{type:String},dsName:{type:String}},emits:["refreshDataList"],setup(C,{expose:S,emit:j}){const v=C,w=j,D=b(!1),f=b(!1),_=b(),L=b(),P=b(""),t=J({id:"",generatorType:"0",formLayout:1,backendPath:"",frontendPath:"",packageName:"",email:"",author:"",version:"",moduleName:"",functionName:"",className:"",tableComment:"",tableName:"",dsName:"",style:"",childTableName:""}),q=b([]),z=b({tableName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],tableComment:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],className:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],packageName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],author:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],moduleName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],functionName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],generatorType:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formLayout:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],backendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],frontendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],style:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),U=()=>{Q().then(({data:m})=>{m&&m.length>0&&(q.value=m)})};return K(()=>L,()=>{const{childTableName:m}=L.value||{};P.value=m?`${v.tableName} + ${m}`:v.tableName},{deep:!0,immediate:!0}),W(()=>{var m,a;_.value&&_.value.resetFields(),t.id="",t.tableName=String(v.tableName),t.dsName=String(v.dsName),m=t.dsName,a=t.tableName,f.value=!0,$(m,a).then(d=>{var g;Object.assign(t,d.data);let n=d.data.groupList;t.style=(g=n[0])==null?void 0:g.id;const o=V.get("frontendPath"),i=V.get("backendPath");o&&i&&(t.frontendPath=o,t.backendPath=i)}).finally(()=>{f.value=!1}),U(),(async()=>X().then(({data:d})=>{d||A().confirm("\u6A21\u677F\u53D1\u73B0\u65B0\u7248\u672C\uFF0C\u662F\u5426\u66F4\u65B0\uFF1F").then(()=>{Z().then(()=>{B().success("\u66F4\u65B0\u6210\u529F"),U()})}).catch(()=>{})}))()}),S({submitHandle:async()=>{try{return!!await _.value.validate()&&(f.value=!0,await M(Object.assign(t,L.value)),D.value=!1,w("refreshDataList"),t)}catch{return Promise.reject()}finally{t.generatorType==="1"&&(V.set("frontendPath",t.frontendPath),V.set("backendPath",t.backendPath)),f.value=!1}}}),(m,a)=>{const d=p("el-input"),n=p("el-form-item"),o=p("el-col"),i=p("tip"),g=p("el-row"),F=p("el-option"),R=p("el-select"),N=p("el-radio"),T=p("el-radio-group"),I=p("el-form"),O=Y("loading");return ee((h(),y(I,{model:r(t),rules:r(z),"label-width":"120px",ref_key:"dataFormRef",ref:_},{default:l(()=>[e(g,null,{default:l(()=>[e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u8868\u540D",prop:"tableName"},{default:l(()=>[e(d,{disabled:"",placeholder:"\u8868\u540D",value:r(P)},null,8,["value"])]),_:1})]),_:1}),e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{prop:"tableComment"},{label:l(()=>[a[11]||(a[11]=c("span",null,"\u6CE8\u91CA",-1)),e(i,{content:"\u6CE8\u91CA"})]),default:l(()=>[e(d,{placeholder:"\u8BF4\u660E",modelValue:r(t).tableComment,"onUpdate:modelValue":a[0]||(a[0]=u=>r(t).tableComment=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u7C7B\u540D",prop:"className"},{default:l(()=>[e(d,{placeholder:"\u7C7B\u540D",modelValue:r(t).className,"onUpdate:modelValue":a[1]||(a[1]=u=>r(t).className=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u4F5C\u8005",prop:"author"},{default:l(()=>[e(d,{placeholder:"\u9ED8\u8BA4\u4F5C\u8005",modelValue:r(t).author,"onUpdate:modelValue":a[2]||(a[2]=u=>r(t).author=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u9879\u76EE\u5305\u540D",prop:"packageName"},{default:l(()=>[e(d,{placeholder:"\u9879\u76EE\u5305\u540D",modelValue:r(t).packageName,"onUpdate:modelValue":a[3]||(a[3]=u=>r(t).packageName=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{prop:"moduleName"},{label:l(()=>[a[12]||(a[12]=c("span",null,"\u6A21\u5757\u540D",-1)),e(i,{content:"\u6240\u5C5E\u5FAE\u670D\u52A1\u6A21\u5757\u540D\u79F0\uFF0C\u5BF9\u5E94\u5FAE\u670D\u52A1\u8DEF\u7531\u524D\u7F00 \uFF08\u5355\u4F53\u56FA\u5B9A admin\uFF09"})]),default:l(()=>[e(d,{placeholder:"\u6A21\u5757\u540D",modelValue:r(t).moduleName,"onUpdate:modelValue":a[4]||(a[4]=u=>r(t).moduleName=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{prop:"functionName"},{label:l(()=>[a[13]||(a[13]=c("span",null,"\u529F\u80FD\u540D",-1)),e(i,{content:"\u5BF9\u5E94\u751F\u6210\u7684Controller @RequestMapping \u8BF7\u6C42\u8DEF\u5F84"})]),default:l(()=>[e(d,{placeholder:"\u529F\u80FD\u540D",modelValue:r(t).functionName,"onUpdate:modelValue":a[5]||(a[5]=u=>r(t).functionName=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u4EE3\u7801\u98CE\u683C",prop:"style"},{default:l(()=>[e(R,{modelValue:r(t).style,"onUpdate:modelValue":a[6]||(a[6]=u=>r(t).style=u)},{default:l(()=>[(h(!0),ae(le,null,te(r(q),(u,H)=>(h(),y(F,{key:H,label:u.groupName,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u8868\u5355\u5E03\u5C40",prop:"formLayout"},{default:l(()=>[e(T,{modelValue:r(t).formLayout,"onUpdate:modelValue":a[7]||(a[7]=u=>r(t).formLayout=u)},{default:l(()=>[e(N,{border:"",value:1},{default:l(()=>a[14]||(a[14]=[k("\u4E00\u5217")])),_:1}),e(N,{border:"",value:2},{default:l(()=>a[15]||(a[15]=[k("\u4E24\u5217")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12,class:"mb20"},{default:l(()=>[e(n,{label:"\u751F\u6210\u65B9\u5F0F",prop:"generatorType"},{default:l(()=>[e(T,{modelValue:r(t).generatorType,"onUpdate:modelValue":a[8]||(a[8]=u=>r(t).generatorType=u)},{default:l(()=>[e(N,{border:"",value:"1"},{default:l(()=>a[16]||(a[16]=[k("\u81EA\u5B9A\u4E49\u8DEF\u5F84")])),_:1}),e(N,{border:"",value:"0"},{default:l(()=>a[17]||(a[17]=[k("ZIP \u538B\u7F29\u5305")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{span:24,class:"mb20"},{default:l(()=>a[18]||(a[18]=[c("span",null,"\u9009\u81EA\u5B9A\u4E49\uFF0C\u540E\u7AEF\u751F\u6210\u8DEF\u5F84\u4E3E\u4F8B:/Users/**/**/**/**/pig/pig-upms/pig-upms-biz/",-1)])),_:1}),e(o,{span:24,class:"mb20"},{default:l(()=>[r(t).generatorType==="1"?(h(),y(n,{key:0,prop:"backendPath"},{label:l(()=>[a[19]||(a[19]=c("span",null,"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),e(i,{content:"\u540E\u7AEF\u6A21\u5757biz\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\pigx\\pigx-upms\\pigx-upms-biz"})]),default:l(()=>[e(d,{placeholder:"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:r(t).backendPath,"onUpdate:modelValue":a[9]||(a[9]=u=>r(t).backendPath=u)},null,8,["modelValue"])]),_:1})):x("",!0),r(t).generatorType==="1"?(h(),y(n,{key:1,prop:"frontendPath"},{label:l(()=>[a[20]||(a[20]=c("span",null,"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),e(i,{content:"\u524D\u7AEF\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\pigx-ui"})]),default:l(()=>[e(d,{placeholder:"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:r(t).frontendPath,"onUpdate:modelValue":a[10]||(a[10]=u=>r(t).frontendPath=u)},null,8,["modelValue"])]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[O,r(f)]])}}}),[["__scopeId","data-v-cd190467"]]);export{re as default};
