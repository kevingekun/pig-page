import{a as b,r as i,a0 as x,j as T,al as l,Q as y,o as F,R as a,X as e,T as z,e as u,M,W as P,ab as R}from"./vue.Bq5FSDyb.js";import{v as j,r as w,C as B,a as K}from"./index.-C1ni1oB.js";const Q=["src"],W={class:"font12 mt30 login-animation4 login-msg"},X=b({name:"password"}),A=b({...X,emits:["signInSuccess"],setup(D,{emit:S}){const{t:d}=j.useI18n(),V=S,h=i(),c=i(!1),o=x({isShowPassword:!1,ruleForm:{username:"admin",password:"123456",code:"",randomStr:""}}),k=x({username:[{validator:w.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:d("password.accountPlaceholder1")}],password:[{validator:w.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:d("password.accountPlaceholder2")}],code:[{validator:w.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:d("password.accountPlaceholder3")}]}),$=i(!0),_=i(""),m=()=>{o.ruleForm.randomStr=B(),_.value=`https://pig.255032.xyz/admin/code/image?randomStr=${o.ruleForm.randomStr}`},v=async()=>{if(!await h.value.validate().catch(()=>{}))return!1;c.value=!0;try{await K().login(o.ruleForm),V("signInSuccess")}finally{m(),c.value=!1}};return T(()=>{m()}),(t,r)=>{const U=l("ele-User"),p=l("el-icon"),g=l("el-input"),n=l("el-form-item"),C=l("ele-Unlock"),q=l("ele-Position"),f=l("el-col"),I=l("el-button"),L=l("el-form");return F(),y(L,{size:"large",class:"login-content-form",ref_key:"loginFormRef",ref:h,rules:k,model:o.ruleForm,onKeyup:R(v,["enter"])},{default:a(()=>[e(n,{class:"login-animation1",prop:"username"},{default:a(()=>[e(g,{text:"",placeholder:t.$t("password.accountPlaceholder1"),modelValue:o.ruleForm.username,"onUpdate:modelValue":r[0]||(r[0]=s=>o.ruleForm.username=s),clearable:"",autocomplete:"off"},{prefix:a(()=>[e(p,{class:"el-input__icon"},{default:a(()=>[e(U)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),e(n,{class:"login-animation2",prop:"password"},{default:a(()=>[e(g,{type:o.isShowPassword?"text":"password",placeholder:t.$t("password.accountPlaceholder2"),modelValue:o.ruleForm.password,"onUpdate:modelValue":r[2]||(r[2]=s=>o.ruleForm.password=s),autocomplete:"off"},{prefix:a(()=>[e(p,{class:"el-input__icon"},{default:a(()=>[e(C)]),_:1})]),suffix:a(()=>[u("i",{class:M(["iconfont el-input__icon login-content-password",o.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:r[1]||(r[1]=s=>o.isShowPassword=!o.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),$.value?(F(),y(n,{key:0,class:"login-animation2",prop:"code"},{default:a(()=>[e(f,{span:15},{default:a(()=>[e(g,{text:"",maxlength:"4",placeholder:t.$t("mobile.placeholder2"),modelValue:o.ruleForm.code,"onUpdate:modelValue":r[3]||(r[3]=s=>o.ruleForm.code=s),clearable:"",autocomplete:"off"},{prefix:a(()=>[e(p,{class:"el-input__icon"},{default:a(()=>[e(q)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),e(f,{span:1}),e(f,{span:8},{default:a(()=>[u("img",{src:_.value,onClick:m},null,8,Q)]),_:1})]),_:1})):z("",!0),e(n,{class:"login-animation4"},{default:a(()=>[e(I,{type:"primary",class:"login-content-submit",loading:c.value,onClick:v},{default:a(()=>[u("span",null,P(t.$t("password.accountBtnText")),1)]),_:1},8,["loading"])]),_:1}),u("div",W,P(t.$t("browserMsgText")),1)]),_:1},8,["rules","model"])}}});export{A as default};
